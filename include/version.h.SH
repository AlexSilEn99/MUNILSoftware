echo "Generating include/version.h..."

if test -r version.h
then
   generation=`sed -n 's/^wxString version_build_generation = wxT("\(.*\)\");/\1/p' < version.h`
   if test ! "$generation" ; then generation=0; fi
else
   generation=0
fi

generation=`expr $generation + 1`
creation=`date | \
awk '{if (NF == 6) \
         { print $1 " "  $2 " " $3 " "  $6 " at " $4 " " $5 } \
else \
         { print $1 " "  $2 " " $3 " " $7 " at " $4 " " $5 " " $6 }}'`

cat >version.h <<!SUB!THIS!

/*
 * This file is generated by version.h.SH. Any changes made will go away.
 */

#ifdef HAVE_CONFIG_H
 #include "../config.h"
#endif

#include <wx/string.h>

wxString version_build_generation = wxT("$generation");
wxString version_build_creation = wxT("$creation");

!SUB!THIS!
